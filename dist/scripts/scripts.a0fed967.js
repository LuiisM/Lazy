"use strict";angular.module("pruebaApp",["ngResource"]).config(["$compileProvider",function(a){a.aHrefSanitizationWhitelist(/^\s*(|blob|):/)}]),angular.module("pruebaApp").controller("MainCtrl",["$scope","apiService","$window",function(a,b,c){function d(){var b=new Blob([a.content],{type:"text/plain"}),d=c.URL||c.webkitURL;a.file=d.createObjectURL(b)}var e=this;e.form={},a.file_name="lazy_loading_example_output.txt",e.send=function(){b.resolve({name:e.form.name,personId:e.form.document,data:a.content},function(b){for(var c="",e=0;e<b.length;e++)c+="Case #"+e+" "+b[e]+"\n";a.content=c,console.log(b),d(),a.done=!0},function(b){a.content="Archivo no válido",console.log(data)})},a.readFile=function(b){a.done=!1,a.content=b}}]),angular.module("pruebaApp").factory("apiService",["$resource",function(a){return a("http://localhost:8080/information",{},{resolve:{method:"POST",transformRequest:function(a){var b=a.data.toString();return b=b.substr(0,b.length-1).split("\n"),a.data=b,angular.toJson(a)},isArray:!0}})}]),angular.module("pruebaApp").directive("onReadFile",["$parse",function(a){return{restrict:"A",scope:!1,link:function(b,c,d){c.bind("change",function(e){var f=a(d.onReadFile),g=new FileReader;g.onload=function(){var a=g.result;b.$apply(function(){f(b,{file:a})})},g.readAsText(c[0].files[0])})}}}]),angular.module("pruebaApp").run(["$templateCache",function(a){a.put("views/main.html",'<div class="middlePage"> <div class="page-header"> <h1 class="logo">Prueba <small>Complete los campos</small></h1> </div> <div class="panel panel-info"> <div class="panel-heading"> <h3 class="panel-title"></h3> </div> <div class="panel-body"> <div class="row"> <div class="col-md-5"> <pre>{{content}}</pre> <a ng-if="done" ng-href="{{file}}" download="{{file_name}}">Download</a> </div> <div class="col-md-7" style="border-left:1px solid #ccc;height:160px"> <form class="form-horizontal" name="formupload" ng-submit="main.send()"> <input id="textinput" name="textinput" type="text" placeholder="Cédula" ng-model="main.form.document" class="form-control input-md" required> <input id="textinput" name="textinput" type="text" placeholder="Nombre" ng-model="main.form.name" class="form-control input-md" required> <input type="file" on-read-file="readFile(file)"> <button id="singlebutton" name="singlebutton" class="btn btn-info btn-sm pull-right" ng-disabled="formupload.$invalid">Enviar</button> </form> </div> </div> </div> </div> </div>')}]);